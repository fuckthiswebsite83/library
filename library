function HealthBar:Update(character, bounds, config)
    if not (bounds and config.healthBarEnabled) then
        self:SetVisible(false)
        self.outline.Visible = false
        return
    end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local health, maxHealth

    -- Check for custom health value in Stats folder only if the game ID is 863266079
    if game.PlaceId == 863266079 then
        local player = Players:GetPlayerFromCharacter(character)
        if player and player:FindFirstChild("Stats") and player.Stats:FindFirstChild("Health") then
            health = player.Stats.Health.Value
            maxHealth = player.Stats.Health.MaxValue or 100 -- Assuming max health is 100 if not specified
        elseif humanoid then
            health = humanoid.Health
            maxHealth = humanoid.MaxHealth
        else
            self:SetVisible(false)
            self.outline.Visible = false
            return
        end
    elseif humanoid then
        health = humanoid.Health
        maxHealth = humanoid.MaxHealth
    else
        self:SetVisible(false)
        self.outline.Visible = false
        return
    end
    
    local healthPercent = health / maxHealth
    local boxHeight = bounds.maxY - bounds.minY
    
    local healthColor = Color3New(1 - healthPercent, healthPercent, 0)
    self.drawable.Color = healthColor
    
    self.drawable.Size = Vector2New(5, boxHeight * healthPercent)
    self.drawable.Position = Vector2New(bounds.minX - 10, bounds.minY + boxHeight * (1 - healthPercent))
    self:SetVisible(true)
    
    self.outline.Size = Vector2New(5, boxHeight)
    self.outline.Position = Vector2New(bounds.minX - 10, bounds.minY)
    self.outline.Visible = true
end
